amlModuleIdentifier:
  moduleName: DDPG Score
  moduleVersion: 0.0.1
  namespace: microsoft.com/azureml/samples
metadata:
  annotations:
    tags:
    - Machine Learning\Score
description: Loads a DDPG for reinforcement learning and inferences it
inputs:
- name: Environment name
  type: Mode
  default: Pendulum-v0
  description: environment_name
  options:
  - Pendulum-v0
  - BipedalWalker-v2
- name: Gamma
  type: Float
  default: 0.99
  description: gamma
- name: Validation times
  type: Int
  default: 10
  description: validation_times
- name: Model path
  type: ModelDirectory
  description: model_path
outputs:
- name: Save path
  type: DataFrameDirectory
  description: save_path
implementation:
  container:
    amlEnvironment:
      docker:
        baseImage: mcr.microsoft.com/azureml/base-gpu:intelmpi2018.3-cuda10.0-cudnn7-ubuntu16.04
      python:
        condaDependencies:
          name: project_environment
          channels:
          - defaults
          dependencies:
          - python=3.6.3
          - pip:
            - azureml-core==1.0.48
            - azureml-designer-core==0.0.33
            - pandas==0.24.2
            - fire==0.1.3
            - gym==0.14.0
            - torch==1.3
            - torchvision==0.4.1
            - pillow==6.0.0
    command: [python, ddpg/score.py]
    args: [
      --environment_name, {inputValue: Environment name},
      --model_path, {inputPath: Model path},
      --gamma, {inputValue: Gamma},
      --validation_times, {inputValue: Validation times},
      --save_path, {outputPath: Save path},
    ]
